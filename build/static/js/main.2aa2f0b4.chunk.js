(this["webpackJsonpsales-management-frontend"]=this["webpackJsonpsales-management-frontend"]||[]).push([[0],{166:function(e,t,n){e.exports=n(479)},479:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getList",(function(){return y}));var a={};n.r(a),n.d(a,"getErrors",(function(){return R})),n.d(a,"getList",(function(){return x}));var o=n(0),c=n.n(o),i=n(4),l=n.n(i),u=n(57),s=n(145),d=n(146),f=n(24),m=Object(f.fromJS)({list:[]}),p=n(41),h=n.n(p),b=n(64),g=n(65),v=n.n(g),O="http://localhost:3000";O="https://sales-management-zm.herokuapp.com";var y=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var r,a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("".concat(O,"/").concat(e)).catch((function(e){return console.log(e)}));case 2:r=t.sent,a=r.data.products,c=a,o={type:"home/INIT_LIST_ACTION",data:Object(f.fromJS)(c)},n(o);case 6:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}()},E=Object(f.fromJS)({list:[],errors:[]}),k=n(71),j=["name","message","row"],w={CATEGORY_ERROR:"Category cannot be parsed correctly in product url",REVENUE_ERROR:"Revenue cannot be parsed correctly in product url",SUB_CATEGORY_ERROR:"Sub-Category cannot be parsed correctly in product url",PRODCUT_ID_ERROR:"Product ID cannot be parsed correctly in product url"},S=function(e){if(e&&e.code)return e.message=w[e.code],e},_=function(e){return{type:"detail/INIT_LIST_ACTION",data:Object(f.fromJS)(e)}},C=function(e){return{type:"detail/GET_EROORS_ACTION",data:Object(f.fromJS)(e)}},I=function(e){return e.reduce((function(e,t){return Object.values(t).map((function(t){t.orders.map((function(t){return t.line_items.map((function(t){return"object"===typeof t.product_url&&(e=[].concat(Object(k.a)(e),[t.product_url])),isNaN(t.revenue)&&(e=[].concat(Object(k.a)(e),[t.revenue])),e}))}))})),e}),[])},T=function(e){return e&&e.length?e.reduce((function(t,n){return Object.values(n).map((function(e){e.orders.map((function(e){return e.line_items.map((function(e){"object"===typeof e.product_url&&(e.product_url=""),e.revenue&&!isNaN(e.revenue)||(e.revenue=NaN)}))}))})),[].concat(Object(k.a)(t),Object(k.a)(e))}),[]):[]},R=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var r,a,o,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("".concat(O,"/api/order/").concat(e)).catch((function(e){return console.log(e)}));case 2:r=t.sent,a=r.data,o=I(a).map((function(e){return S(e)})).map((function(e){return t=e,n=j,Object.keys(t).filter((function(e){return n.includes(e)})).reduce((function(e,n){return e[n]=t[n],e}),{});var t,n})),c=C(o),n(c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var r,a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("".concat(O,"/api/order/").concat(e)).catch((function(e){return console.log(e)}));case 2:r=t.sent,a=T(r.data),o=_(a),n(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=Object(d.combineReducers)({home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"home/INIT_LIST_ACTION":return e.merge({list:t.data});default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"detail/INIT_LIST_ACTION":return e.merge({list:t.data});case"detail/GET_EROORS_ACTION":return e.merge({errors:t.data});default:return e}}}),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,J=Object(u.d)(N,L(Object(u.a)(s.a))),A=n(56),q=n(62),G=n(40),W=n(79),z=n(80),F=n(88),M=n(81),U=n(89),D=n(148),P=n.n(D),B=n(488),V=n(39),X=n(487),Y=n(26),H=n(27);function K(){var e=Object(Y.a)(["\n    background-color: ",";\n    color: ",";\n    font-weight: ",";\n"]);return K=function(){return e},e}var Q=H.a.mark(K(),(function(e){return e.backgroundColor?e.backgroundColor:"#FFFF00"}),(function(e){return e.color?e.color:"black"}),(function(e){return e.fontWeight?e.fontWeight:"bold"})),Z=function(e){var t=e.backgroundColor,n=e.color,r=e.fontWeight,a=e.children;return c.a.createElement(Q,{backgroundColor:t,fontWeight:r,color:n},a)};function $(){var e=Object(Y.a)(["\n  display : flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%\ntable {\n  border-collapse: collapse;\n  table-layout: auto;\n  width: 100%;\n\n}\n\nth {\n  text-transform: uppercase;\n  {background-color: white}\n}\n\nth, td {\n  text-align: left;\n  padding: 8px;\n}\n\ntd {\n  text-transform: capitalize;\n}\n\ntr:nth-child(odd) {background-color: #e6f7ff;}\n\n"]);return $=function(){return e},e}var ee=H.a.div($()),te=function(e,t){return c.a.createElement("td",{nowrap:"true",key:t+e},e)},ne=function(e){var t,n=e.data,r=n[0]&&Object.keys(n[0]),a=n.map((function(e){return Object.values(e)}));return c.a.createElement(ee,null,c.a.createElement("table",null,(t=r,c.a.createElement("thead",null,c.a.createElement("tr",null,t&&t.map((function(e){return c.a.createElement("th",{nowrap:"true",key:e},e)}))))),function(e){return c.a.createElement("tbody",null,e.map((function(e,t){return c.a.createElement("tr",{key:t+e[0]},e.map((function(e,t){return te(e,t)})))})))}(a)))};function re(){var e=Object(Y.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 10px;\n"]);return re=function(){return e},e}var ae=H.a.div(re()),oe=(n(127),function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(F.a)(this,Object(M.a)(t).call(this,e))).filters={},n.timerState=null,n.handleOk=function(){n.setState({loading:!0}),n.timerState=setTimeout((function(){n.setState({loading:!1,visible:!1})}),3e3)},n.handleCancel=function(){n.setState({visible:!1})},n.handleOnChange=function(e){var t=n.props,r=t.handleGetList,a=t.list;e.persist(),n.debouncedFn||(n.debouncedFn=P.a.debounce((function(){var t=e.target.value;n.setState({orderId:t}),r(a,t),t.trim()?n.setState({showText:!0}):n.setState({showText:!1})}),300)),n.debouncedFn()},n.state={filters:{},loading:!1,visible:!0,showText:!1,orderId:""},n}return Object(U.a)(t,e),Object(z.a)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timerState)}},{key:"render",value:function(){var e=this.props.list,t=this.state,n=t.visible,r=t.loading,a=t.orderId,o=t.showText,i=e.toJS(),l=!(i&&i.length);return c.a.createElement(ae,null,c.a.createElement(B.a,{visible:n,title:"tsv content",onOk:this.handleOk,onCancel:this.handleCancel,footer:[c.a.createElement(q.b,{to:"/".concat(a),key:Math.random()},c.a.createElement(V.a,{key:"submit",type:"primary",loading:r,onClick:this.handleOk,disabled:l},"Submit"))]},i&&i.length?c.a.createElement(ne,{data:i}):c.a.createElement("div",null,c.a.createElement(X.a,{placeholder:"please type an order id, eg. CA-2016-152156",style:{width:"40%",marginLeft:"30%",marginRight:"30%"},onChange:this.handleOnChange}),o&&c.a.createElement("div",{style:{marginTop:"10px",marginLeft:"45%",marginRight:"40%"}},c.a.createElement(Z,{fontWeight:"normal"},"Invalid order Id")))))}}]),t}(o.PureComponent)),ce=Object(G.f)(Object(A.b)((function(e){return{list:e.getIn(["home","list"])}}),(function(e){return{handleGetList:function(t,n){n&&e(r.getList(n))}}}))(oe)),ie=n(486),le=n(485),ue=n(489),se=n(484);function de(){var e=Object(Y.a)(["\n    display: flex;\n    flex-direction: column;\n    margin: 5% 30%;\n    li {\n        margin-top: 20px;\n        font-size: 20px;\n        text-transform: capitalize;\n    }\n    button {\n        margin: 0 30%;\n    }\n"]);return de=function(){return e},e}var fe=H.a.div(de()),me=function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(F.a)(this,Object(M.a)(t).call(this,e))).timerState=null,n.handleOk=function(){navigator.clipboard.writeText(window.location.href),n.setState({copied:!0})},n.handleCancel=function(){n.setState({visible:!1})},n.state={loading:!1,visible:!0,copied:!1},n}return Object(U.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.handleGetList)(e.list,e.id)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerState)}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.errors,r=this.state,a=r.visible,o=r.loading,i=r.copied,l=t.toJS(),u=n.toJS();return c.a.createElement(fe,null,c.a.createElement(B.a,{visible:a,title:"results",onOk:this.handleOk,onCancel:this.handleCancel,footer:[c.a.createElement(X.a,{key:Math.random(),placeholder:"Order Url",style:{width:"50%",marginRight:"3%"},value:window.location.href,disabled:!0}),c.a.createElement(V.a,{key:"submit",type:"primary",loading:o,onClick:this.handleOk},i?c.a.createElement("span",null,"Copied!"):c.a.createElement("span",null,"Copy Link"))]},c.a.createElement(ie.a,{style:{width:"100%"}},l.map((function(e,t){return c.a.createElement(ue.a,{language:"javascript",key:Math.random()+t,style:se.a},JSON.stringify(e,void 0,4))}))),c.a.createElement(ie.a,{style:{width:"100%",marginTop:20},title:"errors"},u.length?c.a.createElement(le.a,{size:"small",bordered:!0,dataSource:u,renderItem:function(e){return c.a.createElement(le.a.Item,{key:Math.random()},e.name,": ",e.message," at row ",c.a.createElement(Z,null,e.row)," in tsv file, please check accordingly.")}}):!l.length&&c.a.createElement("p",null,c.a.createElement(Z,{fontWeight:"nomal"},"Something wrong with parsing tsv data, might because of an empty customer name field, pelase check accordingly!")))))}}]),t}(o.PureComponent),pe=Object(G.f)(Object(A.b)((function(e,t){return{id:t.match.params.order_id,list:e.getIn(["detail","list"]),errors:e.getIn(["detail","errors"])}}),(function(e){return{handleGetList:function(t,n){n&&(e(a.getList(n)),e(a.getErrors(n)))}}}))(me));var he=function(){return c.a.createElement(A.a,{store:J},c.a.createElement("div",null,c.a.createElement(q.a,null,c.a.createElement(G.c,null,c.a.createElement(G.a,{path:"/",exact:!0,component:ce}),c.a.createElement(G.a,{path:"/:order_id",component:pe})))))};function be(){var e=Object(Y.a)(["\n@import url('https://fonts.googleapis.com/css?family=Roboto:300,500');\n , abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n\tmargin: 5% 15%;\n\tfont-family: Roboto, sans-serif;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n.ant-modal {\n\twidth: 60% !important;\n}\n"]);return be=function(){return e},e}Object(H.b)(be()),l.a.render(c.a.createElement(he,null),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.2aa2f0b4.chunk.js.map